<!doctype html>
<html>
<head><meta charset="utf-8"><title>Track Payment</title></head>
<body>
  <h2>Payment Status</h2>
  <div id="info">Loading...</div>
  <script>
    async function load() {
      const path = window.location.pathname;
      const code = path.split('/').pop();
      const res = await fetch(`/api/track/${code}`);
      const data = await res.json();
      if(data.ok && data.tx) {
        document.getElementById('info').innerText = `Code: ${data.tx.code}\nType: ${data.tx.type}\nMethod: ${data.tx.method}\nAmount: â‚¹${data.tx.amount}\nStatus: ${data.tx.status}`;
      } else {
        document.getElementById('info').innerText = 'Not found';
      }
    }
    load();
  </script>
</body>
</html>
